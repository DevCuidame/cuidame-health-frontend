<div class="card-container">
  <!-- Indicador de carga -->
  <ion-spinner *ngIf="isLoading" name="crescent" class="loading-spinner"></ion-spinner>
  
  <!-- Mensaje sin beneficiarios -->
  <div *ngIf="!isLoading && sortedBeneficiaries.length === 0" class="empty-state">
    <ion-icon name="people-outline"></ion-icon>
    <p>No tienes beneficiarios registrados</p>
  </div>
  
  <!-- Tarjetas de beneficiarios -->
  <ng-container *ngIf="!isLoading">
    <div *ngFor="let beneficiary of sortedBeneficiaries" class="card" (click)="goToBeneficiary(beneficiary)">
      <div class="card-header">
        <div class="delete-button" (click)="confirmDelete(beneficiary, $event)">
          <ion-icon name="close-circle"></ion-icon>
        </div>
      </div>
      
      <div class="card-avatar">
        <img 
          [src]="beneficiary.photourl ? formatImageUrl(beneficiary.photourl) : (beneficiary.imagebs64 || '/assets/images/default_user.png')" 
          [alt]="beneficiary.nombre"
          loading="lazy"
          (error)="handleImageError($event)"
        />
        <img class="crown" src="/assets/icon/crown.svg" alt="status" />
      </div>

      <h3>{{ beneficiary.nombre }}</h3>
    </div>
  </ng-container>

  <!-- BotÃ³n para agregar un nuevo beneficiario -->
  <div class="add-card" (click)="createBeneficiary()">
    <div class="add-circle">
      <ion-icon name="add-outline"></ion-icon>
    </div>
    <div class="add-text">Agregar</div>
  </div>
</div>